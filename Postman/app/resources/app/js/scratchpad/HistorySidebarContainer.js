"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[11],{12256:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=s(1),o=s(3565);function n(){return i.createElement(o.default,{name:"illustration-no-history"})}},12263:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i,o=s(1),n=s(4),r=s(3583),l=s.n(r),a=s(2403),d=s.n(a),h=s(3194),c=s(2784),p=s(2406),m=s(5574),u=s(2399),S=s(4634),g=s(2785),T=s(7275),b=s(5086),y=s(6488),E=s(12250),f=s(12252),_=s(4470),I=s(6431),v=s(2082),A=s(5583);let C=(0,u.observer)(i=class extends o.Component{constructor(e){super(e),this.handleAddRequest=()=>{if(v.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:A.HISTORY_SIGNIN_MODAL_SUBTITLE})},this.state={isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleAction=this.handleAction.bind(this),this.handleDelete=this.handleDelete.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}getClasses(){return d()({"history-sidebar-list-item":!0,"history-sidebar-list-item__extensibleitem":!0,"is-selected":this.props.selected})}getTooltipText(e){if(!e)return"Delete history"}getLeftAlignedComponents(e){var t;if(!e)return o.createElement("div",{className:"history-sidebar__indent"});const s=(0,_.resolveStoreInstance)(I.default),i=d()({"history-sidebar-list-item-updatedBy":!0,hovered:e}),n=s.isCurrentUserPartner?null===(t=s.partnerMembersByIds)||void 0===t?void 0:t[this.props.userId]:s.teamMembers.get(String(this.props.userId)),r=n&&(n.name||n.username);return o.createElement("div",{className:i,onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.userId&&"0"!==this.props.userId?o.createElement(S.default,{ref:this.userAvatar,size:"small",userId:this.props.userId}):o.createElement(p.default,{name:"icon-descriptive-user-stroke",color:"content-color-secondary",ref:this.userAvatar}),this.userAvatar.current&&o.createElement(g.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(g.TooltipBody,null,o.createElement("div",{className:"history-sidebar-list-item-avatar-tooltip"},o.createElement(h.default,{type:"body-medium"},r),o.createElement(h.default,{type:"body-medium"},l()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e){const t=d()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e)return null;const s=(0,_.resolveStoreInstance)(y.default),{userCanSave:i}=(0,_.resolveStoreInstance)(b.default),n=i&&s.can("delete","history");return o.createElement("div",{className:t},o.createElement(c.Button,{type:"icon",onClick:this.handleAddRequest,disabled:!i,tooltip:i?f.ACTION_TYPE_SAVE_REQUEST_TOOLTIP:null},o.createElement(p.default,{size:"large",name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),o.createElement(c.Button,{type:"icon",onClick:this.handleDelete,disabled:!n,tooltip:this.getTooltipText(!n,!i)},o.createElement(p.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"ecitemhistory",itemType:this.props.itemType},t)}handleAction(e){this.props.onSelectAction(e,{ecitemhistory:[this.props.id]})}handleDelete(e){e.stopPropagation(),this.handleAction(E.ACTION_TYPE_DELETE)}render(){var e;const t=null===(e=pm.ECItemRegistry)||void 0===e?void 0:e.getConfig(this.props.itemType);return t?o.createElement("div",{"data-index":this.props.index},o.createElement(T.default,{text:this.props.url,icon:o.createElement(m.default,{name:t.icon,color:t.iconColor}),isSelected:this.props.isSelected,onClick:this.handleSelect,className:this.getClasses(),leftMetaComponent:this.getLeftAlignedComponents,rightMetaComponent:this.getRightAlignedComponents})):null}})||i},12250:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE:function(){return l},ACTION_TYPE_DOCUMENT:function(){return n},ACTION_TYPE_DOWNLOAD:function(){return a},ACTION_TYPE_MOCK:function(){return r},ACTION_TYPE_MONITOR:function(){return o},ACTION_TYPE_SAVE:function(){return i}});const i="save",o="monitor",n="document",r="mock",l="delete",a="download"},12252:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:function(){return o},ACTION_TYPE_DELETE_REQUEST_TOOLTIP:function(){return i},ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:function(){return r},ACTION_TYPE_SAVE_REQUEST_TOOLTIP:function(){return n}});const i="Delete request",o="Delete items",n="Add request to Collection",r="Add requests to Collection"},12253:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var i,o=s(1),n=s(2403),r=s.n(n),l=s(2399),a=s(2406),d=s(3284),h=s(2784),c=s(4632),p=s(12250),m=s(4482),u=s(3562),S=s(2104),g=s(4383),T=s(4367);const b="Not available to collection run items";let y=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this),this.handleShortcutSelect=this.handleShortcutSelect.bind(this),this.handleToggle=this.handleToggle.bind(this)}getKeymapHandlers(){return{delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,p.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){pm.mediator.trigger("focusSidebar"),this.handleSelect(e)}handleSelect(e){this.props.onSelect&&this.props.onSelect(e),this.handleToggle(!1)}handleToggle(e){this.props.onToggle&&this.props.onToggle(e)}getDropDownActionWrapperClasses(){return r()({"collection-sidebar-request-dropdown-actions-wrapper":!0})}getDisabledText(e){if(e)return(0,S.getStore)("OnlineStatusStore").userCanSave?u.DISABLED_TOOLTIP_NO_PERMISSION:u.DISABLED_TOOLTIP_IS_OFFLINE}render(){const e=c.default.pluralize({count:this.props.count,singular:"Request",plural:"Requests"}),t=(0,S.getStore)("PermissionStore"),{userCanSave:s}=(0,S.getStore)("OnlineStatusStore"),i=s&&t.can("delete","history");return o.createElement("div",{className:this.getDropDownActionWrapperClasses()},o.createElement(d.Dropdown,{keyMapHandlers:this.getKeymapHandlers(),ref:"menu",onSelect:this.handleSelect,onToggle:this.handleToggle,className:"collection-sidebar-request-actions-dropdown history-sidebar-multiple-request-selected-dropdown"},o.createElement(d.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},o.createElement(h.Button,{className:"history-sidebar-list-item__button__options",tooltip:g.ACTION_TYPE_VIEW_MORE_ACTIONS_TOOLTIP}," ",o.createElement(a.default,{name:"icon-action-options-stroke",className:"history-sidebar-list-item__actions__options pm-icon pm-icon-normal"}))),o.createElement(d.DropdownMenu,{"align-right":!0},o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_SAVE,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?b:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Save ${e}`)),o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_MONITOR,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Monitor ${e}`)),o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_DOCUMENT,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Document ${e}`)),o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_MOCK,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:m.DISABLED_IN_SCRATCHPAD_TOOLTIP:u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},`Mock ${e}`)),"browser"!==window.SDK_PLATFORM&&o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_DOWNLOAD,disabled:!s||!this.props.disableRequestSpecificActions,disabledText:s?"You can only export collection runs":u.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Export")),o.createElement(d.MenuItem,{refKey:p.ACTION_TYPE_DELETE,disabled:!i,disabledText:this.getDisabledText(!i)},o.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),o.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,T.getShortcutByName)("delete"))))))}})||i},12261:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var i,o=s(1),n=s(4),r=s(2403),l=s.n(r),a=s(2406),d=s(3583),h=s.n(d),c=s(2399),p=s(2784),m=s(4634),u=s(2785),S=s(12250),g=s(3562),T=s(2104),b=s(7275);let y=(0,c.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleRemoveRun=this.handleRemoveRun.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"collectionrun"},t)}getClasses(){return l()({"history-sidebar-list-item":!0,"history-sidebar-list-item__collection":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{runs:[this.props.id]})}handleRemoveRun(e){e.stopPropagation(),this.handleDropdownActionSelect(S.ACTION_TYPE_DELETE)}getTooltipText(e){return e?(0,T.getStore)("OnlineStatusStore").userCanSave?g.DISABLED_TOOLTIP_NO_PERMISSION:g.DISABLED_TOOLTIP_IS_OFFLINE:"Delete collection run"}getLeftAlignedComponents(e,t){const s=l()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return o.createElement("div",{className:"history-sidebar__indent"});const i=(0,T.getStore)("CurrentUserStore").teamMembers.get(this.props.owner),n=i&&(i.name||i.username);return o.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?o.createElement(m.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):o.createElement(a.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal"}),this.userAvatar.current&&o.createElement(u.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(u.TooltipBody,null,o.createElement("div",null,o.createElement("div",null,n),o.createElement("div",null,h()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=l()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const i=(0,T.getStore)("PermissionStore"),{userCanSave:n}=(0,T.getStore)("OnlineStatusStore"),r=n&&i.can("delete","collectionrun",this.props.id);return o.createElement("div",{className:s},o.createElement(p.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRun,disabled:!r,tooltip:this.getTooltipText(!r)},o.createElement(a.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}render(){return o.createElement(b.default,{"data-index":this.props.index,text:this.props.name,icon:"icon-action-run-stroke",isSelected:this.props.selected,onClick:this.handleSelect,className:this.getClasses(),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents})}})||i},12260:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var i=s(1);function o(e){return i.createElement("div",{className:"history-sidebar-list-item-group"},i.createElement("div",{className:"history-sidebar-list-item-group__error"},"Unable to load items."," ",i.createElement("span",{onClick:e.onRetry},"Retry")))}},12258:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i,o=s(1),n=s(4),r=s(2403),l=s.n(r),a=s(3583),d=s.n(a),h=s(2399),c=s(2406),p=s(2784),m=s(3284),u=s(4634),S=s(2785),g=s(7275),T=s(12250),b=s(3562),y=s(4482),E=s(2104),f=s(12252),_=s(6261),I=s(4367),v=s(2082),A=s(5583);let C=(0,h.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);if(!e)return;e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"request"},t)}getClasses(){return l()({"history-sidebar-list-item":!0,"history-sidebar-list-item__request":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{requests:[this.props.id],from:"history_single"})}handleAddRequestToCollectionClick(e){if(e.stopPropagation(),v.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:A.HISTORY_SIGNIN_MODAL_SUBTITLE});this.handleDropdownActionSelect(T.ACTION_TYPE_SAVE,{from:"history_single"})}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(T.ACTION_TYPE_DELETE)}getTooltipText(e,t){return e?t?b.DISABLED_TOOLTIP_IS_OFFLINE:b.DISABLED_TOOLTIP_NO_PERMISSION:f.ACTION_TYPE_DELETE_REQUEST_TOOLTIP}getDisabledText(e,t){if(e)return t?b.DISABLED_TOOLTIP_IS_OFFLINE:b.DISABLED_TOOLTIP_NO_PERMISSION}getLeftAlignedComponents(e,t){const s=l()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return o.createElement("div",{className:"history-sidebar__indent"});const i=(0,E.getStore)("CurrentUserStore").teamMembers.get(this.props.lastUpdatedBy),n=i&&(i.name||i.username);return o.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.lastUpdatedBy&&"0"!==this.props.lastUpdatedBy?o.createElement(u.default,{ref:this.userAvatar,size:"small",userId:this.props.lastUpdatedBy}):o.createElement(c.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal",ref:this.userAvatar}),this.userAvatar.current&&o.createElement(S.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(S.TooltipBody,null,o.createElement("div",null,o.createElement("div",null,n||""),o.createElement("div",null,d()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=l()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const i=(0,E.getStore)("PermissionStore"),{userCanSave:n}=(0,E.getStore)("OnlineStatusStore"),r=n&&i.can("delete","history",this.props.id);return o.createElement("div",{className:s},o.createElement(p.Button,{className:"history-sidebar-list-item__button__add",type:"icon",onClick:this.handleAddRequestToCollectionClick,disabled:!n,tooltip:n?f.ACTION_TYPE_SAVE_REQUEST_TOOLTIP:b.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement(c.default,{size:"large",name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),o.createElement(p.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!r,tooltip:this.getTooltipText(!r,!n)},o.createElement(c.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}getActionsMenuItems(e){if(v.default.isEnabled)return null;const{userCanSave:t,userCanSaveAndSync:s}=(0,E.getStore)("OnlineStatusStore");return o.createElement(m.DropdownMenu,{"align-right":!0},o.createElement(m.MenuItem,{refKey:T.ACTION_TYPE_SAVE,disabled:!t,disabledText:b.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Save Request")),o.createElement(m.MenuItem,{refKey:T.ACTION_TYPE_MONITOR,disabled:!s,disabledText:t?y.DISABLED_IN_SCRATCHPAD_TOOLTIP:b.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Monitor Request")),o.createElement(m.MenuItem,{refKey:T.ACTION_TYPE_DOCUMENT,disabled:!s,disabledText:t?y.DISABLED_IN_SCRATCHPAD_TOOLTIP:b.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Document Request")),o.createElement(m.MenuItem,{refKey:T.ACTION_TYPE_MOCK,disabled:!s,disabledText:t?y.DISABLED_IN_SCRATCHPAD_TOOLTIP:b.DISABLED_TOOLTIP_IS_OFFLINE},o.createElement("div",{className:"dropdown-menu-item-label"},"Mock Request")),o.createElement(m.MenuItem,{refKey:T.ACTION_TYPE_DELETE,disabled:!t||!e,disabledText:this.getDisabledText(!e,!t)},o.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),o.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,I.getShortcutByName)("delete"))))}render(){const e=(0,E.getStore)("PermissionStore").can("delete","history",this.props.id);return o.createElement(g.default,{"data-index":this.props.index,text:this.props.url,onClick:this.handleSelect,isSelected:this.props.selected,icon:o.createElement(_.default,{method:this.props.method||"GET"}),className:this.getClasses(),moreActions:this.getActionsMenuItems(e),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents,onActionsDropdownSelect:this.handleDropdownActionSelect})}})||i},12259:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var i=s(1),o=s(2403),n=s.n(o),r=s(2406),l=s(2784),a=s(12250),d=s(3562),h=s(2104),c=s(12252),p=s(2082),m=s(5583),u=s(12253),S=s(40);class g extends i.PureComponent{constructor(e){super(e),this.state={dropdownOpen:!1,isHovered:!1},this.store=(0,h.getStore)("HistorySidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState({isHovered:!0})}handleMouseLeave(){!this.state.dropdownOpen&&this.setState({isHovered:!1})}getCollapseButtonClasses(){return n()({caret:!0,"pm-icon":!0,"pm-icon-normal":!0,"is-closed":this.store.isItemCollapsed(this.props.name)})}getMetaClasses(){return n()({"history-sidebar-list-item-group__meta":!0,"is-hovered":this.state.dropdownOpen})}handleToggleGroup(){const{name:e}=this.props;if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){const t={requests:S.reduce(this.props.items,((e,t)=>("request"===t.type&&e.push(t.id),e)),[]),runs:S.reduce(this.props.items,((e,t)=>("collectionrun"===t.type&&e.push(t.id),e)),[]),websockethistory:S.reduce(this.props.items,((e,t)=>("websockethistory"===t.type&&e.push(t.id),e)),[]),ecitemhistory:S.reduce(this.props.items,((e,t)=>("ecitemhistory"===t.type&&e.push(t.id),e)),[]),defaultCollectionName:this.props.name,from:"history_date_group"};e!==a.ACTION_TYPE_DELETE?this.props.onSelectAction(e,t):pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onSelectAction(e,t)}),{identifier:"selected"})}handleAddRequestToCollectionClick(e){if(e.stopPropagation(),p.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:m.HISTORY_SIGNIN_MODAL_SUBTITLE});this.handleDropdownActionSelect(a.ACTION_TYPE_SAVE)}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(a.ACTION_TYPE_DELETE)}render(){const e=S.size(this.store.getSelectedItems())>1,{userCanSave:t}=(0,h.getStore)("OnlineStatusStore");return i.createElement("div",{className:"history-sidebar-list-item-group",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{className:this.getMetaClasses(),onClick:this.handleToggleGroup},i.createElement("div",{className:"history-sidebar-list-item-group__name"},i.createElement(r.default,{name:"icon-direction-down",className:this.getCollapseButtonClasses()}),i.createElement("span",null,this.props.name)),!e&&this.state.isHovered&&i.createElement("div",{className:"history-sidebar-list-item-group__actions"},i.createElement(l.Button,{className:"history-sidebar-list-item__button__add",type:"icon",disabled:!t||this.props.disableRequestSpecificActions,onClick:this.handleAddRequestToCollectionClick,tooltip:t?this.props.disableRequestSpecificActions?"Not available to collection run items":c.ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:d.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(l.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!t,tooltip:t?c.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:d.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),!p.default.isEnabled&&i.createElement(u.default,{count:S.size(this.props.items),onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.props.disableRequestSpecificActions}))))}}},12249:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var i,o=s(1),n=s(4),r=s(3285),l=s.n(r),a=s(3184),d=s(2829),h=s(12250),c=s(2104),p=s(12251),m=s(12254),u=s(40);let S=l()(i=class extends o.Component{constructor(e){super(e),this.store=(0,c.getStore)("HistorySidebarStore"),this.historyStore=(0,c.getStore)("HistoryStore"),this.focus=this.focus.bind(this),this.groupItems=this.groupItems.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrev=this.selectPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.selectItem=this.selectItem.bind(this),this.multiselectNextItem=this.multiselectNextItem.bind(this),this.multiselectPrevItem=this.multiselectPrevItem.bind(this)}getKeyMapHandlers(){return{groupItems:pm.shortcuts.handle("groupItems",this.groupItems),nextItem:pm.shortcuts.handle("nextItem",this.selectNext),prevItem:pm.shortcuts.handle("prevItem",this.selectPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),multiselectNextItem:pm.shortcuts.handle("multiselectNextItem",this.multiselectNextItem),multiselectPrevItem:pm.shortcuts.handle("multiselectPrevtItem",this.multiselectPrevItem),select:pm.shortcuts.handle("select",this.selectItem),search:pm.shortcuts.handle("search")}}focus(){const e=(0,n.findDOMNode)(this.refs.history);e&&e.focus()}selectNext(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&u.invoke(this,"props.onSelect",t)}selectPrev(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&u.invoke(this,"props.onSelect",t)}deleteItem(e){if(document.activeElement.classList.contains("history-sidebar__filter"))return;e&&e.preventDefault();const t=this.store.getPrevItem();u.invoke(this,"props.onDeleteMultiple","selected",t)}selectItem(e){e&&e.preventDefault(),u.invoke(this,"refs.list.selectItem")}multiselectNextItem(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&u.invoke(this,"props.onSelect",t,{metaKey:!0})}multiselectPrevItem(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&u.invoke(this,"props.onSelect",t,{metaKey:!0})}groupItems(){this.props.onSelectAction&&this.props.onSelectAction("all",h.ACTION_TYPE_SAVE,{requests:this.store.getSelectedItems(),from:"history_multiple"})}render(){return o.createElement(a.default,{handlers:this.getKeyMapHandlers(),keyMap:pm.shortcuts.getShortcuts()},o.createElement("div",{className:"history-sidebar",ref:"history"},o.createElement("div",{className:"history-sidebar-wrapper"},o.createElement(p.default,{historySidebar:this.store,historyStore:this.historyStore,enableHistoryResponseSaving:this.props.enableHistoryResponseSaving,onDeleteMultiple:this.props.onDeleteMultiple,onSelectAction:this.props.onSelectAction.bind(this,"all"),onToggleHistoryResponseSaving:this.props.onToggleHistoryResponseSaving}),o.createElement(d.default,{identifier:"history"},o.createElement(m.default,{ref:"list",initializing:this.props.initializing,isSocketConnected:this.props.isSocketConnected,isLoggedIn:this.props.isLoggedIn,workspace:this.props.workspace,onDeleteMultiple:this.props.onDeleteMultiple,onLoadMore:this.props.onLoadMore,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction})))))}})||i},12248:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var i,o=s(1),n=s(2786),r=s.n(n),l=s(2399),a=s(2104),d=s(1828),h=s(1891),c=s(12249),p=s(2244),m=s(6238),u=s(2387),S=s(1900),g=s(2219),T=s(4215),b=s(3561),y=s(2386),E=s(12250),f=s(12245),_=s(4638),I=s(5087),v=s(40);let A=r()(i=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.closeHistoryItemTabs=e=>{if(null==e||!e.length)return;const t=e.map((e=>this.findHistoryItemVisibleTabId(e)));(null==t?void 0:t.length)&&g.default.closeMultiple(t)},this.findHistoryItemVisibleTabId=e=>{const t=(0,a.getStore)("ActiveWorkspaceSessionStore").visibleEditors;if(null!=t&&t.length)return t.find((t=>{var s,i;const o=u.default.getRouteConfigForTab(t);return((0,S.decomposeUID)(null==o||null===(s=o.routeParams)||void 0===s?void 0:s.hid).modelId||(null==o||null===(i=o.routeParams)||void 0===i?void 0:i.echid))===e}))},this.store=(0,a.getStore)("HistorySidebarStore"),this.focus=this.focus.bind(this),this.handleLoadRequestDebounced=v.debounce(this.handleLoadRequest,100,{leading:!0}).bind(this),this.handleLoadCollectionRunDebounced=v.debounce(this.handleLoadCollectionRun,100,{leading:!0}).bind(this),this.handleLoadWebSocketHistoryDebounced=v.debounce(this.handleLoadWebSocketHistory,100,{leading:!0}).bind(this),this.handleLoadECHistoryDebounced=v.debounce(this.handleLoadECHistory,100,{leading:!0}).bind(this),this.handleActiveRequestChange=this.handleActiveRequestChange.bind(this),this.handleAddToCollection=this.handleAddToCollection.bind(this),this.handleDeleteMultiple=this.handleDeleteMultiple.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleSelectAction=this.handleSelectAction.bind(this),this.handleSelectHistoryAction=this.handleSelectHistoryAction.bind(this),this.handleSelectCollectionRunAction=this.handleSelectCollectionRunAction.bind(this),this.handleSelectWebSocketHistoryAction=this.handleSelectWebSocketHistoryAction.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("activeRequestChanged",this.handleActiveRequestChange)}componentWillUnmount(){pm.mediator.off("activeRequestChanged",this.handleActiveRequestChange)}focus(){v.invoke(this,"refs.history.focus")}selectNext(){v.invoke(this,"refs.history.selectNext")}handleActiveRequestChange(e){this.store.itemExists(e)?this.store.resetSelection([e]):this.store.resetSelection()}handleClickOutside(e){if(!v.isEmpty(this.store.getSelectedItems())){const t=document.getElementsByClassName("ReactModal__Content")[0],s=document.querySelector(".history-sidebar-multiple-request-selected-dropdown");if(t&&t.contains(e.target)||s&&s.contains(e.target))return;this.store.resetSelection()}}handleLoadRequest(e,t=!1){e&&p.default.openHistoryInTab(e,{newTab:t,preview:!0})}handleLoadCollectionRun(e,t=!1){if(!e)return;const{uid:s}=(0,a.getStore)("RunnerRunStore").find(e)||{};(0,T.openRunInTab)(s,{newTab:t,preview:!t})}handleLoadWebSocketHistory(e,t=!1,s){e&&("socket.io"===s?(0,f.openSocketIOHistoryTab)(e,{forceNew:t,preview:!t}):(0,f.openWebSocketHistoryTab)(e,{forceNew:t,preview:!t}))}handleLoadECHistory(e,t,s=!1){if(!e)return;const i=pm.ECItemRegistry.getSDK(t);i&&i.openHistoryTab(e,{forceNew:s,preview:!s})}handleItemSelect({id:e,type:t,itemType:s},i={}){const o=v.includes(navigator.platform,"Mac");i.shiftKey&&(o?i.metaKey:i.ctrlKey)?("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!0):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!0,s):"ecitemhistory"===t?this.handleLoadECHistoryDebounced(e,s,!0):this.handleLoadRequestDebounced(e,!0),pm.mediator.trigger("focusSidebar")):i.ctrlKey||i.metaKey?this.store.isItemSelected(e)?this.store.unselectItem(e):this.store.selectItem(e):("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!1):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!1,s):"ecitemhistory"===t?this.handleLoadECHistoryDebounced(e,s,!1):this.handleLoadRequestDebounced(e,!1),pm.mediator.trigger("focusSidebar"),this.store.resetSelection([e]))}handleAddToCollection(e={}){const{requests:t}=e,s=v.isEmpty(t)?this.store.getSelectedItems():t;v.isEmpty(s)||p.default.convertHistoryToRequests(s).then((t=>{1===v.size(t)?t[0]&&pm.mediator.trigger("showAddToCollectionModal",t[0],{from:e.from}):pm.mediator.trigger("addRequestsToCollection",t,e)}))}handleToggleHistoryResponseSaving(){if(!(0,y.isWorkspaceMember)())return(0,y.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,y.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_save_response"});const e=(0,a.getStore)("ActiveWorkspaceStore").settings,t={enableHistoryResponseSaving:!(e&&e.enableHistoryResponseSaving)};return(0,h.default)((0,d.createEvent)("updateSettings","workspace",{id:(0,a.getStore)("ActiveWorkspaceStore").id,settings:t})).catch((e=>{const t=e.isFriendly?e.message:"Could not update workspace settings";pm.toasts.error(t,{dedupeId:"ws-settings-error"})}))}resetHistorySelection(e){e&&e.id?this.store.resetSelection([e.id]):this.store.resetSelection()}handleDeleteMultiple(e,t){const s=(0,a.getStore)("PermissionStore"),i=(0,a.getStore)("RunnerRunStore");return(0,y.isWorkspaceMember)()?(0,a.getStore)("OnlineStatusStore").userCanSave?Promise.resolve().then((()=>{if("all"===e){var t;const e=(0,a.getStore)("ActiveWorkspaceStore").id;(0,h.default)((0,d.createEvent)("deleteAllInWorkspace","history",e)),i.deleteRun(v.map(i.values,(e=>e.id))),I.default.deleteAllHistory(e);const s=null===(t=this.store.getVisibleItems())||void 0===t?void 0:t.map((e=>e.id));this.closeHistoryItemTabs(s),(0,f.deleteWebSocketHistory)()}else if("selected"===e){s.can("delete","history")?(0,h.default)((0,d.createEvent)("deleteMultiple","history",{ids:this.store.getSelectedItems()},null,null)):pm.toasts.error("You do not have permissions to delete history."),s.can("delete","collectionrun")?(0,a.getStore)("RunnerRunStore").deleteRun(this.store.getSelectedItems()):pm.toasts.error("You do not have permissions to delete collection runs.");const e=(0,a.getStore)("ActiveWorkspaceStore").id,t=this.store.getSelectedItems(),i=new Set;v.forEach(this.store.historyItems,(e=>{"ecitemhistory"===(null==e?void 0:e.type)&&i.add(e.id)}));const o=v.filter(t,(e=>i.has(e)));I.default.deleteManyHistory(e,o),this.closeHistoryItemTabs(this.store.getSelectedItems()),(0,f.deleteWebSocketHistory)(this.store.getSelectedItems())}})).then((()=>{this.resetHistorySelection(t)})).catch((()=>{this.resetHistorySelection(t)})):(0,b.showOfflineActionDisabledToast)():(0,y.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,y.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_delete_multiple"})}handleAddRequestToService(e,t){const{requests:s,defaultCollectionName:i="",from:o=""}=e,n=v.isEmpty(s)?this.store.getSelectedItems():s;v.isEmpty(n)||p.default.convertHistoryToRequests(n).then((e=>{if(!v.isEmpty(e)){const s={name:i,from:o};m.default.create(t,{requests:e,opts:s},null,{from:"history_sidebar"})}}))}handleSelectHistoryAction(e,t){switch(e){case E.ACTION_TYPE_SAVE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,b.showOfflineActionDisabledToast)();this.handleAddToCollection(t);break;case E.ACTION_TYPE_MONITOR:this.handleAddRequestToService(t,"openCreateNewMonitorModal");break;case E.ACTION_TYPE_DOCUMENT:this.handleAddRequestToService(t,"openCreateNewDocumentationModal");break;case E.ACTION_TYPE_MOCK:this.handleAddRequestToService(t,"openCreateNewMockModal");break;case E.ACTION_TYPE_DELETE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,b.showOfflineActionDisabledToast)();(0,h.default)((0,d.createEvent)("deleteMultiple","history",{ids:t.requests},null,null)),this.closeHistoryItemTabs(t.requests)}}handleSelectCollectionRunAction(e,t){switch(e){case E.ACTION_TYPE_DELETE:if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,b.showOfflineActionDisabledToast)();(0,a.getStore)("RunnerRunStore").deleteRun(t.runs);break;case E.ACTION_TYPE_DOWNLOAD:return(0,_.exportRuns)(t.runs);default:pm.logger.warn(`HistorySidebarContainer~handleSelectCollectionRunAction: ${e} - action not handled`)}}handleSelectWebSocketHistoryAction(e,t){if(e===E.ACTION_TYPE_DELETE){if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,b.showOfflineActionDisabledToast)();(0,f.deleteWebSocketHistory)(t.websockethistory)}}handleSelectECHistoryAction(e,t){if(e===E.ACTION_TYPE_DELETE){if(!(0,a.getStore)("OnlineStatusStore").userCanSave)return(0,b.showOfflineActionDisabledToast)();I.default.deleteManyHistory((0,a.getStore)("ActiveWorkspaceStore").id,t.ecitemhistory),this.closeHistoryItemTabs(t.ecitemhistory)}}handleSelectAction(e,t,s){return(0,y.isWorkspaceMember)()?"collectionrun"===e?(1===v.size(s.runs)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.runs[0]),s.runs&&this.handleSelectCollectionRunAction(t,s)):"websockethistory"===e?(1===v.size(s.websockethistory)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.websockethistory[0]),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s)):"ecitemhistory"===e?(1===v.size(s.ecitemhistory)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.ecitemhistory[0]),s.ecitemhistory&&this.handleSelectECHistoryAction(t,s)):"request"===e?(1===v.size(s.requests)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.requests[0]),this.handleSelectHistoryAction(t,s)):void("all"===e&&(s.runs&&this.handleSelectCollectionRunAction(t,s),s.requests&&this.handleSelectHistoryAction(t,s),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s),s.ecitemhistory&&this.handleSelectECHistoryAction(t,s))):(0,y.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,y.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:`history_${t}`})}render(){const e=(0,a.getStore)("ActiveWorkspaceStore").settings,t=(0,a.getStore)("SyncStatusStore"),s=(0,a.getStore)("CurrentUserStore"),i=(0,a.getStore)("HistoryStore"),n=(0,a.getStore)("ActiveWorkspaceStore"),r=e&&e.enableHistoryResponseSaving;return o.createElement(c.default,{store:this.store,enableHistoryResponseSaving:r,initializing:s.isHydrating||i.isHydrating||!n.id,isLoggedIn:s.isLoggedIn,isSocketConnected:t.isSocketConnected,workspace:n.id,onSelectAction:this.handleSelectAction,onDeleteMultiple:this.handleDeleteMultiple,onSelect:this.handleItemSelect,onToggleHistoryResponseSaving:this.handleToggleHistoryResponseSaving,ref:"history"})}})||i)||i},12262:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=s(1),o=s(2784);function n(e){return i.createElement("div",{className:"history-sidebar-list-error"},i.createElement("h4",null,"Couldn't load history"),i.createElement("p",null,"Something went wrong while trying to load history items. Check your internet and try again."),i.createElement(o.Button,{type:"secondary",onClick:e.onRetry},"Retry"))}},12254:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var i,o=s(1),n=s(2399),r=s(3271),l=s(5130),a=s(3192),d=s(6282),h=s(2406),c=s(2784),p=s(4632),m=s(2104),u=s(12255),S=s(12257),g=s(7243),T=s(12258),b=s(12259),y=s(12260),E=s(12261),f=s(12262),_=s(6247),I=s(12263),v=s(40);function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},A.apply(this,arguments)}let C=(0,n.observer)(i=class extends o.Component{constructor(e){super(e),this.store=(0,m.getStore)("HistorySidebarStore"),this.requesterSidebarStore=(0,m.getStore)("RequesterSidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.handleClearCachedHeight=this.handleClearCachedHeight.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.handleItemsRender=this.handleItemsRender.bind(this),this.handleItemsRenderDebounced=v.debounce(this.handleItemsRender,1e3),this.handleListScroll=this.handleListScroll.bind(this),this.handleListScrollDebounced=v.debounce(this.handleListScroll,300),this.handleJumpToTop=this.handleJumpToTop.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.heightSet={},this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSet[e]=t.target.offsetHeight}this.handleClearCachedHeight(0)}))}componentDidMount(){this.props.initializing||this.store.load()}componentDidUpdate(e){this.props.initializing||(e.initializing?this.store.load():(this.props.workspace!==e.workspace||this.props.isLoggedIn&&!e.isLoggedIn)&&(this.store.load(),this.listRef&&this.listRef.scrollTo(0),this.store.setScrollOffset(0)))}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSet[t]}handleClearCachedHeight(e){this.listRef.resetAfterIndex(e)}handleToggleGroup(e){if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}getItemSize(e){const t=v.get(this.store,["historyItems",e]);return"meta"===t.type||"error"===t.type?28:this.heightSet[e]||28}getListItem(e){const t=v.get(this.store,["historyItems",e.index]);return t?"loading"===t.type?o.createElement("div",{className:"history-list__loading",style:e.style,key:t.key},o.createElement(a.default,null)):"error"===t.type?o.createElement("div",{className:"history-list__error",style:e.style},o.createElement(y.default,{key:t.name,onRetry:()=>"load-error"===t.key?this.store.load(!0):"load-more-error"===t.key?this.store.loadMore():void 0})):"meta"===t.type?o.createElement("div",{className:"history-list__meta",style:e.style},o.createElement(b.default,{name:t.name,key:t.name,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"all"),items:t.items,disableRequestSpecificActions:t.disableRequestSpecificActions})):"collectionrun"===t.type?o.createElement("div",{className:"history-list__collection-run",style:e.style},o.createElement(E.default,A({},t,{name:t.name,hideActions:v.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"collectionrun"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):"websockethistory"===t.type?o.createElement("div",{className:"history-list__websocket",style:e.style},o.createElement(S.default,A({},t,{key:t.id,isSelected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"websockethistory"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):"ecitemhistory"===t.type?o.createElement("div",{className:"history-list__extensibleitem",style:e.style},o.createElement(I.default,A({},t,{key:t.id,isSelected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,t.type),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):o.createElement("div",{className:"history-list__item",style:e.style},o.createElement(T.default,A({},t,{hideActions:v.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"request"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,viewLargeBody:this.props.viewLargeBody,index:e.index}))):null}getNotification(){return this.store.showReloadNotification?o.createElement("div",{className:"history-sidebar-list__notification"},o.createElement(c.Button,{type:"primary",size:"small",className:"history-sidebar-list__refresh",onClick:this.handleRefresh},o.createElement(h.default,{name:"icon-action-refresh-stroke",color:"content-color-primary",size:"small",className:"pm-icon"}),"Refresh")):this.store.newHistoryIds.size?o.createElement("div",{className:"history-sidebar-list__notification"},o.createElement(c.Button,{type:"primary",size:"small",className:"history-sidebar-list__more-on-top",onClick:this.handleJumpToTop},o.createElement(h.default,{name:"icon-direction-up",color:"content-color-primary",size:"small",className:"pm-icon"}),o.createElement("span",null,this.store.newHistoryIds.size," ","new"," ",p.default.pluralize({count:this.store.newHistoryIds.size,singular:"item",plural:"items"})))):null}handleListScroll({scrollOffset:e}){0===e&&this.store.newHistoryIds.size&&this.store.showNewHistory(),this.store.setScrollOffset(e)}handleItemsRender(e){this.store.scrolledToEnd||this.store.loadingMore||this.requesterSidebarStore.query||e.overscanStopIndex===e.visibleStopIndex&&this.store.loadMore()}handleJumpToTop(){this.listRef&&this.listRef.scrollTo(0)}handleRefresh(){this.listRef&&this.listRef.scrollTo(0),this.store.load(!0)}render(){const e=e=>o.createElement(n.Observer,null,this.getListItem.bind(this,e)),t=({height:t,width:s})=>o.createElement(n.Observer,null,(()=>o.createElement(r.VariableSizeList,{height:t,itemCount:this.store.historyItems.length,itemSize:this.getItemSize,width:s,ref:e=>{this.listRef=e},overscanCount:10,onItemsRendered:this.handleItemsRenderDebounced,onScroll:this.handleListScrollDebounced},e)));return v.isEmpty(this.store.historyItems)?this.props.initializing||this.store.loading?o.createElement("div",{className:"history-sidebar-list"},o.createElement(_.default,{hasHierarchy:!0})):this.store.loadError?"You don't have permission to view history in this workspace"===this.store.loadError.message?o.createElement("div",{className:"history-sidebar-list-permission-error"},o.createElement(g.default,{illustration:o.createElement(d.default,null),title:"You don't have permission to view history",message:"Only team members can view history of this workspace"})):o.createElement("div",{className:"history-sidebar-list"},o.createElement(f.default,{onRetry:()=>this.store.load(!0)})):o.createElement("div",{className:"history-sidebar-list"},o.createElement(u.default,{query:this.store.searchQuery})):o.createElement("div",{className:"history-sidebar-list",ref:"history"},this.getNotification(),o.createElement(l.default,null,t))}})||i},12255:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var i,o=s(1),n=s(2399),r=s(12256),l=s(3579),a=s(2099),d=s(7243),h=s(7244),c=s(2082);let p=(0,n.observer)(i=class extends o.Component{constructor(e){super(e),this.handleShowMeHow=this.handleShowMeHow.bind(this)}handleShowMeHow(){(0,a.openExternalLink)(l.SEND_FIRST_REQUEST_DOCS,"_blank")}render(){const e=c.default.isEnabled;return this.props.query?o.createElement(h.default,{searchQuery:this.props.query,illustration:o.createElement(r.default,null)}):o.createElement(d.default,{illustration:o.createElement(r.default,null),title:e?"Time to send your first request":"You haven't sent any requests.",message:e?"All the requests you send will be stored in History. Sign in or create an account to organize them in collections.":"Any request you send in this workspace will appear here.",action:{label:"Show me how",handler:this.handleShowMeHow}})}})||i},12251:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i,o=s(1),n=s(2403),r=s.n(n),l=s(2399),a=s(3194),d=s(2406),h=s(2784),c=s(4510),p=s(3284),m=s(2785),u=s(3561),S=s(12250),g=s(4638),T=s(2104),b=s(7256),y=s(2082),E=s(5583),f=s(12252),_=s(12253),I=s(40);let v=(0,l.observer)(i=class extends o.Component{constructor(e){super(e),this.state={dropdownOpen:!1,showResponseToggleTooltip:!1},this.handleDeleteClick=this.handleDeleteClick.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddToCollectionClick=this.handleAddToCollectionClick.bind(this),this.handleDeleteSelected=this.handleDeleteSelected.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleActionsDropdownSelect=this.handleActionsDropdownSelect.bind(this),this.handleSaveResponseToggle=this.handleSaveResponseToggle.bind(this),this.showResponseToggleTooltip=this.showResponseToggleTooltip.bind(this),this.hideResponseToggleTooltip=this.hideResponseToggleTooltip.bind(this),this.disableRequestItemOptions=this.disableRequestItemOptions.bind(this)}handleAddToCollectionClick(e){if(e.stopPropagation(),y.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:E.HISTORY_SIGNIN_MODAL_SUBTITLE});this.props.onSelectAction(S.ACTION_TYPE_SAVE,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleDeleteClick(){pm.mediator.trigger("showDeleteHistoryModal",(async()=>{try{this.props.onDeleteMultiple&&await this.props.onDeleteMultiple("all")}catch(e){pm.logger.error("Could not delete history",e),pm.toasts.error("Could not delete history")}}),{identifier:"all"})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){return e===S.ACTION_TYPE_DELETE?(0,T.getStore)("OnlineStatusStore").userCanSave?void pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onDeleteMultiple("selected")}),{identifier:"selected"}):(0,u.showOfflineActionDisabledToast)():e===S.ACTION_TYPE_DOWNLOAD?(0,g.exportRuns)(this.props.historySidebar.getSelectedItems()):void this.props.onSelectAction(e,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleActionsDropdownSelect(e){if("history-sidebar--clear-all"===e)this.handleDeleteClick()}handleDeleteSelected(){this.handleDropdownActionSelect(S.ACTION_TYPE_DELETE)}disableRequestItemOptions(){const e=I.filter(this.props.historySidebar.historyItems,(e=>this.props.historySidebar.selectedItems.has(e.id)&&"request"===e.type));return I.isEmpty(e)}showResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!0})}hideResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!1})}handleSaveResponseToggle(e){e&&e.stopPropagation(),this.props.onToggleHistoryResponseSaving&&this.props.onToggleHistoryResponseSaving()}handleSearchChange(e){this.props.historySidebar.setSearchQuery(e)}getToggleSaveResponseClasses(e){return r()({"dropdown-menu-item history-sidebar-menu__actions-save-response-toggle":!0,"is-disabled":e})}render(){const e=this.props.historySidebar.selectedItems.size,{isLoggedIn:t}=(0,T.getStore)("CurrentUserStore"),{isOffline:s,userCanSave:i}=(0,T.getStore)("OnlineStatusStore"),n=s&&t,r=!(0,T.getStore)("PermissionStore").can("editMeta","workspace",(0,T.getStore)("ActiveWorkspaceStore").id);return e>1?o.createElement("div",{className:"history-sidebar-menu multiple-request-selected"},o.createElement("div",{className:"history-sidebar-menu__left"},o.createElement(a.default,{type:"body-small",color:"content-color-primary"},e," ","items selected")),o.createElement("div",{className:"history-sidebar-menu__right"},o.createElement("div",{className:"history-sidebar-menu__actions-delete-history-wrapper"},o.createElement(h.Button,{disabled:!i,className:"history-sidebar-list-item__button__add",type:"icon",onClick:this.handleAddToCollectionClick,tooltip:f.ACTION_TYPE_SAVE_REQUESTS_TOOLTIP},o.createElement(d.default,{name:"icon-action-add-stroke",size:"large",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),o.createElement(h.Button,{disabled:!i,className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleDeleteSelected,tooltip:f.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP},o.createElement(d.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),!y.default.isEnabled&&o.createElement(_.default,{count:e,onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.disableRequestItemOptions()})))):o.createElement("div",{className:"history-sidebar-menu"},o.createElement(b.default,{className:"history-sidebar__filter",onSearch:this.handleSearchChange,onActionsDropdownSelect:this.handleActionsDropdownSelect,searchQuery:this.props.historySidebar.searchQuery,moreActions:o.createElement(p.DropdownMenu,{className:"history-sidebar__header-actions-dropdown--menu"},!I.isEmpty(this.props.historySidebar.historyItems)&&o.createElement(p.MenuItem,{className:"history-sidebar__header-actions-dropdown--menu-item history-sidebar-menu__actions-delete-history-wrapper",key:"history-sidebar--clear-all",refKey:"history-sidebar--clear-all",disabled:n,disabledText:"You need to be online to clear history."},o.createElement("span",null,"Clear all")),o.createElement("div",{className:this.getToggleSaveResponseClasses(r),onClick:r?void 0:this.handleSaveResponseToggle,ref:e=>{this.saveResponseToggleContainerRef=e},onMouseEnter:this.showResponseToggleTooltip,onMouseLeave:this.hideResponseToggleTooltip},"Save Responses",o.createElement(c.default,{isActive:this.props.enableHistoryResponseSaving,activeLabel:"",inactiveLabel:""}),o.createElement(m.Tooltip,{className:"history-sidebar-menu--save-response__tooltip",show:this.state.showResponseToggleTooltip,target:this.saveResponseToggleContainerRef},o.createElement(m.TooltipBody,null,r?"You dont have permission to take this action.":"When turned off, the response headers and body won't be saved, though the response code, time, size, and language will be saved for reporting purposes."))))}))}})||i},12257:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var i,o=s(1),n=s(4),r=s(3583),l=s.n(r),a=s(2403),d=s.n(a),h=s(3194),c=s(3573),p=s(2406),m=s(2673),u=s(2659),S=s(2399),g=s(4634),T=s(2785),b=s(7275),y=s(2104),E=s(12250),f=s(3562);let _=(0,S.observer)(i=class extends o.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.userAvatar=o.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleAction=this.handleAction.bind(this),this.handleDelete=this.handleDelete.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,n.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,n.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}getClasses(){return d()({"history-sidebar-list-item":!0,"history-sidebar-list-item__websocket-history":!0,"is-selected":this.props.selected})}getTooltipText(e,t){return e?t?f.DISABLED_TOOLTIP_IS_OFFLINE:f.DISABLED_TOOLTIP_NO_PERMISSION:"Delete history"}getLeftAlignedComponents(e){if(!e)return o.createElement("div",{className:"history-sidebar__indent"});const t=d()({"history-sidebar-list-item-updatedBy":!0,hovered:e}),s=(0,y.getStore)("CurrentUserStore").teamMembers.get(String(this.props.owner)),i=s&&(s.name||s.username);return o.createElement("div",{className:t,onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?o.createElement(g.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):o.createElement(p.default,{name:"icon-descriptive-user-stroke",color:"content-color-secondary"}),this.userAvatar.current&&o.createElement(T.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},o.createElement(T.TooltipBody,null,o.createElement("div",{className:"history-sidebar-list-item-avatar-tooltip"},o.createElement(h.default,{type:"body-medium"},i),o.createElement(h.default,{type:"body-medium"},l()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e){const t=d()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e)return null;const s=(0,y.getStore)("PermissionStore"),{userCanSave:i}=(0,y.getStore)("OnlineStatusStore"),n=i&&s.can("delete","history");return o.createElement("div",{className:t},o.createElement(c.default,{type:"tertiary",icon:"icon-action-delete-stroke",onClick:this.handleDelete,isDisabled:!n,tooltip:this.getTooltipText(!n,!i)}))}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"websockethistory",itemType:this.props.subprotocol},t)}handleAction(e){this.props.onSelectAction(e,{websockethistory:[this.props.id]})}handleDelete(e){e.stopPropagation(),this.handleAction(E.ACTION_TYPE_DELETE)}render(){let e=m.default;return"socket.io"===this.props.subprotocol&&(e=u.default),o.createElement("div",{"data-index":this.props.index},o.createElement(b.default,{text:this.props.url,icon:o.createElement(e,{color:"content-color-brand"}),isSelected:this.props.isSelected,onClick:this.handleSelect,className:this.getClasses(),leftMetaComponent:this.getLeftAlignedComponents,rightMetaComponent:this.getRightAlignedComponents}))}})||i}}]);